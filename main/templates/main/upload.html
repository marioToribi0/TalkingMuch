{% extends "main/base.html" %}

{% load static %}

{% block title %}Upload a file{% endblock %}

{% block css %}
<link rel="stylesheet" href="{% static 'css/style_upload.css' %}">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
{% endblock %}

{% block content %}
<div class="wrapper">
    <div class="container">
      <h1>Upload a file</h1>
      <div>
      <form class="upload-container dropzone" enctype="multipart/form-data" method="POST" action="#">
        {% csrf_token %}
        <div class="border-container " onclick="document.getElementById('id_file').click(); document.getElementById('text-loading').innerHTML = 'Loading...';">
          <div class="icons fa-4x">
            <i class="fas fa-file-image" data-fa-transform="shrink-3 down-2 left-6 rotate--45"></i>
            <i class="fas fa-file-alt" data-fa-transform="shrink-2 up-4"></i>
            <i class="fas fa-file-pdf" data-fa-transform="shrink-3 down-2 right-6 rotate-45"></i>
          </div>
          <div enctype="multipart/form-data">
            {{form.as_p}}
            
          </div>
          <p><a href="#" id="file-browser">Browse</a> your computer.</p>
        </div>
        <button type="submit" id="submit_f" style="display:none;position: absolute;z-index: 10;top: 0;"></button>
      </form>
    </div>
      <div>
  
      </div>
      <div>
        <h4 id="text-loading" style="display: inline;padding-right: 20px;"></h4>
        {% if redirect_file %}
          <a style="text-decoration: none;" target="_blank" href="/file_results">
            <button style="display: none;" class="btn btn-outline-success" id="send" onclick="document.getElementById('submit_f').click()">Send</button>
          </a>
        {% else %}
        <button style="display: none;" class="btn btn-outline-success" id="send" onclick="document.getElementById('submit_f').click()">Send</button>
        {% endif %}
      </div>
      
    </div>
    
  </div>
  <!-- partial -->
    <script src='https://use.fontawesome.com/releases/v5.0.10/js/all.js'></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.5/dist/umd/popper.min.js" integrity="sha384-Xe+8cL9oJa6tN/veChSP7q+mnSPaj5Bcu9mPX5F5xIGE0DVittaqT5lorf0EI7Vk" crossorigin="anonymous"></script>
    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/js/bootstrap.min.js" integrity="sha384-kjU+l4N0Yf4ZOJErLsIcvOU2qSb74wXpOhqTvwVx3OElZRweTnQ6d31fXEoRD1Jy" crossorigin="anonymous"></script>
    </script><script  src="{% static 'js/script_upload.js' %}"></script>
{% endblock %}